# Requirements Document

## Introduction
本ドキュメントは、キャンバス上のジェスチャーによる音声再生時間の算出方法を改善する機能変更の要件を定義する。現行の固定比率（20px = 元の音声長さ）を、キャンバスサイズと音声ファイルの再生時間に連動する動的比率に変更することで、より直感的な操作体験を提供する。

## Requirements

### Requirement 1: キャンバス幅と音声再生時間の動的比率算出
**Objective:** As a ユーザー, I want キャンバス幅の半分が音声ファイルの再生時間に対応する比率で線の長さから再生時間が計算される, so that 異なる長さの音声ファイルでも一貫した操作感が得られる

#### Acceptance Criteria
1. The アプリケーション shall キャンバス幅の半分のピクセル数を基準距離として使用する
2. When 線の長さがキャンバス幅の半分と等しい場合, the アプリケーション shall 音声ファイル全体の長さを再生する
3. When 線の長さがキャンバス幅の半分の2倍の場合, the アプリケーション shall 音声ファイルの2倍の長さ（タイムストレッチ）を再生する
4. When 線の長さがキャンバス幅の1/4の場合, the アプリケーション shall 音声ファイルの半分の長さを再生する
5. The アプリケーション shall 線の長さと再生時間の比率を線形に維持する

### Requirement 2: キャンバスサイズの動的取得
**Objective:** As a システム, I want キャンバスのサイズを動的に取得する, so that 画面サイズやレイアウト変更に対応できる

#### Acceptance Criteria
1. The アプリケーション shall キャンバスの現在の幅をピクセル単位で取得できる
2. The 再生時間算出ロジック shall キャンバス幅を動的に参照して比率を計算する
3. The アプリケーション shall キャンバスサイズが変更された場合でも正しい比率で再生時間を算出する

### Requirement 3: 後方互換性
**Objective:** As a 開発者, I want 既存のAPIインターフェースを維持する, so that 他のコンポーネントへの影響を最小限に抑えられる

#### Acceptance Criteria
1. The `calculateDurationRate` 関数 shall 既存の呼び出し元との互換性を維持する
2. The アプリケーション shall 既存のジェスチャー検出ロジックに変更を加えずに動作する
3. The アプリケーション shall 既存のピッチ変換・再生方向ロジックに影響を与えない
